<view>
  <view class="headerBg">
    <view class="selectBtn">
      <view class="{{selectBtn? 'leftBtn' : 'rightBtn'}}" bindtap="selectBtnFn" data-btn="{{false}}">
        <view class="btnTitle">进行中</view>
        <view class="btnNum">200</view>
      </view>
      <view class="{{selectBtn? 'rightBtn' : 'leftBtn'}}" bindtap="selectBtnFn" data-btn="{{true}}">
        <view class="btnTitle">已完成</view>
        <view class="btnNum">1</view>
      </view>
    </view>   
  </view>
  <view class="taskList" wx:if="{{selectBtn}}">
    <view class="task" wx:for="{{goingshops}}" wx:key='index' >
      <view class="task_top">
        <image class="logo" src="{{item.logo}}"></image>
        <text class="shopNme">{{item.shopName}}</text>
        <view class="address">{{item.address}}</view>
      </view>
      <view class="task_middle">
        <view class="canvasBox">
          <canvas canvas-id="{{item.id}}" id="{{item.id}}" class="canvas"></canvas>
          <view class="progressText">
            <view>{{item.recipientsEffective}}/{{item.recipientsLimit}}</view>
            <view style="font-size: 24rpx;">进度</view>
          </view>
        </view>
        <view class="reward">
          <view class="reward_text" wx:if="{{item.mode == '1000'}}">完成助力可得</view>
          <view class="reward_text" wx:if="{{item.mode == '1002'}}">成功组团可得</view>
          <view class="reward_num" wx:if="{{item.mode == '1000'}}">{{item.salary}}<text>元</text></view>
          <view class="reward_num" wx:if="{{item.mode == '1002'}}">{{item.commision}}<text>元</text></view>
        </view>
      </view>
      <view class="task_bottom">
        <view class="task_endtime">距离结束：<text>{{item.time}}</text></view>
        <view class="task_shareBtn">继续推广</view>
      </view>
    </view>
  </view>

  <view class="taskList" wx:if="{{!selectBtn}}">
    <view class="task" wx:for="{{endshops}}" wx:key='index' >
      <view class="task_top">
        <image class="logo" src="{{item.logo}}"></image>
        <text class="shopNme">{{item.shopName}}</text>
        <view class="address">{{item.address}}</view>
      </view>
      <view class="task_middle">
        <view class="canvasBox">
          <canvas canvas-id="{{item.id}}" id="{{item.id}}" class="canvas"></canvas>
          <view class="progressText">
            <view>{{item.recipientsEffective}}/{{item.recipientsLimit}}</view>
            <view style="font-size: 24rpx;">进度</view>
          </view>
        </view>
        <view class="reward">
          <view class="reward_text" wx:if="{{item.mode == '1000'}}">完成助力可得</view>
          <view class="reward_text" wx:if="{{item.mode == '1002'}}">成功组团可得</view>
          <view class="reward_num" wx:if="{{item.mode == '1000'}}">{{item.salary}}<text>元</text></view>
          <view class="reward_num" wx:if="{{item.mode == '1002'}}">{{item.commision}}<text>元</text></view>
        </view>
      </view>
      <view class="task_bottom">
        <view class="task_endtime">距离结束：<text>{{item.time}}</text></view>
        <view class="task_shareBtn">继续推广</view>
      </view>
    </view>
  </view>

  <view class='modalbox' wx:if="{{phonePop}}" catchtouchmove='true'>
    <view class='modal' >
      <view class='text'>
        <view>为了优惠券正常发放</view>
        <view>请同意手机号授权</view>
      </view>
      <view style='border-top:1px solid #ccc;'>
        <button plain="true" open-type="getPhoneNumber" bindgetphonenumber="getPhoneNumber" style='color:#56bc37;'>手机号授权</button>
      </view>
    </view> 
  </view>
</view>
